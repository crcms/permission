<?php

namespace CrCms\Permission;

use CrCms\Foundation\ModuleServiceProvider;
use CrCms\Permission\Listeners\Repositories\FieldListener;
use CrCms\Permission\Listeners\Repositories\MenuListener;
use CrCms\Permission\Listeners\Repositories\PermissionListener;
use CrCms\Permission\Listeners\Repositories\RoleListener;
use CrCms\Permission\Repositories\FieldRepository;
use CrCms\Permission\Repositories\MenuRepository;
use CrCms\Permission\Repositories\PermissionRepository;
use CrCms\Permission\Repositories\RoleRepository;

/**
 * Class PermissionServiceProvider
 * @package CrCms\Permission
 */
class PermissionServiceProvider extends ModuleServiceProvider
{

    protected $basePath = __DIR__ . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR;

    protected $name = 'permission';

    public function boot(): void
    {
        parent::boot(); // TODO: Change the autogenerated stub
        $this->repositoryListeners();
    }

    public function register(): void
    {
        parent::register(); // TODO: Change the autogenerated stub
    }

    /**
     * 权限事件监听
     */
    protected function repositoryListeners()
    {
        MenuRepository::observer(MenuListener::class);
        RoleRepository::observer(RoleListener::class);
        PermissionRepository::observer(PermissionListener::class);
        FieldRepository::observer(FieldListener::class);
    }
}